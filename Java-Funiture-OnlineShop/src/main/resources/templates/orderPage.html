<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>주문 페이지</title>
    <style>
        /* CSS 스타일링 코드 */
    </style>
</head>
<body>
<h1>주문 확인</h1>
<div id="order-details">
    <h2>주문 상품</h2>
    <ul>
        <!-- 여기에 장바구니에서 선택한 상품들의 정보를 표시할 부분 -->
        <li>상품 1: 상품 정보 1</li>
        <li>상품 2: 상품 정보 2</li>
        <li>상품 3: 상품 정보 3</li>
        <!-- 필요에 따라 상품 정보를 동적으로 추가하거나 수정할 수 있습니다 -->
    </ul>
</div>

<div id="order-form">
    <h2>주문 정보</h2>
    <form action="/orders/save" method="post">
        <input type="hidden" name="customerName" value="고객명">
        <input type="hidden" name="customerEmail" value="고객 이메일">
        <input type="hidden" name="shippingAddress" value="배송 주소">
        <input type="hidden" name="paymentMethod" value="결제 방법">
        <!-- 필요한 주문 정보를 추가하시면 됩니다 -->
        <label for="customerName">고객명:</label>
        <input type="text" id="customerName" name="customerName" required><br>

        <label for="customerEmail">고객 이메일:</label>
        <input type="email" id="customerEmail" name="customerEmail" required><br>

        <label for="shippingAddress">배송 주소:</label>
        <input type="text" id="shippingAddress" name="shippingAddress" required><br>

        <label for="paymentMethod">결제 방법:</label>
        <select id="paymentMethod" name="paymentMethod" required>
            <option value="">-- 선택하세요 --</option>
            <option value="card">카드</option>
        </select><br>

        <!-- 결제하기 버튼 -->
        <button onclick="window.location.href = '외부 결제 페이지 URL'">결제하기</button>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // URL에서 파라미터를 읽어와서 선택한 상품들의 정보를 가져옴
        var params = new URLSearchParams(window.location.search);
        var productList = document.querySelector("#order-details ul");

        // URL 파라미터에서 productId에 해당하는 값들을 가져와서 리스트에 추가
        params.getAll("productId").forEach(function(productId) {
            // 서버에서 상품 정보를 가져와서 표시
            fetch("/products/" + productId)
                .then(function(response) {
                    return response.json();
                })
                .then(function(product) {
                    var listItem = document.createElement("li");
                    listItem.textContent = "상품명: " + product.name + " / 가격: " + product.price + "원";
                    productList.appendChild(listItem);
                })
                .catch(function(error) {
                    console.error("상품 정보를 가져오는 중 오류가 발생했습니다:", error);
                });
        });
    });
</script>
</body>
</html>
